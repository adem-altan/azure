
@{
    ViewBag.Title = "Close an Account";
    
}

<h2>Simply Hit Close Button to Close an Account</h2>
<table border="1" cellpadding="5">
    <thead>
    <tr>
        @foreach (System.Data.DataColumn col in Model.Columns)
        {
            <th style="padding: 10px; margin: 10px;">@col.Caption</th>
        }
    </tr>
    </thead>
    <tbody>
    @foreach(System.Data.DataRow row in Model.Rows)
    {
        <tr>
            @foreach (var cell in row.ItemArray)
            {               
                <td style="padding: 10px; margin: 10px;">@cell.ToString()</td>                                  
            }
            <td><input id="@row.ItemArray[1]" type='text' class="btn btn-danger" value="Close This Account" onclick="myFunction(this.id)"></td>

        </tr>

    }      
    </tbody>
</table>

<a> @Html.ActionLink("Click Here to Return the Main Page", "Index", "Home")</a>

<script>
    function myFunction(accNo) {
        console.log(accNo);
        $.ajax({
            type: 'POST',
            url: '@Url.Action("Closer", "Home")',
            dataType: 'html',
            data: ({
                //insert your parameters to pass to controller                
                accNo: accNo   
            }),
            success: function(data) {                
                alert("Account Removed");
                location.reload(); 
            }
        });               
    }
</script>